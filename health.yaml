metadata:
  name: health
  labels:
    nuclio.io/project-name: fd1d6425-8737-4f9f-8a48-d673cc4981e5
spec:
  description: "Uses moment.js (which is installed as part of the build) to add a specified amount of time to \"now\", and returns this amount as a string.\n"
  handler: handler
  runtime: nodejs
  resources: {}
  image: "nuclio/processor-health:latest"
  minReplicas: 1
  maxReplicas: 1
  triggers:
    health:
      class: ""
      kind: mqtt
      url: "guest:guest@10.0.2.15:1883"
      attributes:
        subscriptions:
          - qos: 0
            topic: babycare/health
  build:
    image: ""
    noCache: false
    offline: false
    dependencies: []
    runtimeAttributes:
      repositories: []
    functionSourceCode: dmFyIGFtcXAgPSByZXF1aXJlKCdhbXFwbGliJyk7Cgphc3luYyBmdW5jdGlvbiBsb2dnZXIobXNnKSB7CiAgICBjb25zdCBjb25uID0gYXdhaXQgYW1xcC5jb25uZWN0KCdhbXFwOi8vZ3Vlc3Q6Z3Vlc3RAMTAuMC4yLjE1OjU2NzInKQogICAgY29uc3QgY2hhbm5lbCA9IGF3YWl0IGNvbm4uY3JlYXRlQ2hhbm5lbCgpOwogICAgYXdhaXQgY2hhbm5lbC5hc3NlcnRFeGNoYW5nZSgnYmFieWNhcmUvbG9nZ2VyJywgJ2RpcmVjdCcsIHsgZHVyYWJsZTogZmFsc2UgfSk7CiAgICBhd2FpdCBjaGFubmVsLnB1Ymxpc2goImJhYnljYXJlL2xvZ2dlciIsICJoZWFsdGgiLCBuZXcgQnVmZmVyLmZyb20obXNnKSk7CiAgICBhd2FpdCBjaGFubmVsLmNsb3NlKCk7CiAgICBhd2FpdCBjb25uLmNsb3NlKCk7Cn0KCmV4cG9ydHMuaGFuZGxlciA9IGZ1bmN0aW9uIChjb250ZXh0LCBldmVudCkgewogICAgdmFyIF9ldmVudCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZXZlbnQpKTsKICAgIHZhciBfZGF0YSA9IChfZXZlbnQuYm9keS5kYXRhKTsKCiAgICBjb250ZXh0LmNhbGxiYWNrKCJmZWVkYmFja3QgIiArIF9kYXRhKTsKCiAgICBsb2dnZXIoX2RhdGEpOwp9Owo=
    commands:
      - 'npm install --global moment'
      - 'npm install  -global amqplib'
    codeEntryType: sourceCode
  platform: {}
  readinessTimeoutSeconds: 60
