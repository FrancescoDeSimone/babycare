metadata:
  name: childseat
  labels:
    nuclio.io/project-name: bba0d152-4a73-4d97-94da-c821530cbc9b
spec:
  handler: "main:handler"
  runtime: nodejs
  resources: {}
  image: "nuclio/processor-childseat:latest"
  minReplicas: 1
  maxReplicas: 1
  targetCPU: 75
  triggers:
    seat:
      class: ""
      kind: mqtt
      url: "guest:guest@192.168.1.111:1883"
      attributes:
        subscriptions:
          - qos: 0
            topic: babycare/childseat
  version: 1
  build:
    functionSourceCode: dmFyIGFtcXAgPSByZXF1aXJlKCdhbXFwbGliJyk7DQoNCmFzeW5jIGZ1bmN0aW9uIGxvZ2dlcihtc2cpIHsNCiAgICBjb25zdCBjb25uID0gYXdhaXQgYW1xcC5jb25uZWN0KCdhbXFwOi8vZ3Vlc3Q6Z3Vlc3RAMTkyLjE2OC4xLjExMTo1NjcyJykNCiAgICBjb25zdCBjaGFubmVsID0gYXdhaXQgY29ubi5jcmVhdGVDaGFubmVsKCk7DQogICAgYXdhaXQgY2hhbm5lbC5hc3NlcnRFeGNoYW5nZSgnYmFieWNhcmUvbG9nZ2VyJywgJ2RpcmVjdCcsIHsgZHVyYWJsZTogZmFsc2UgfSk7DQogICAgYXdhaXQgY2hhbm5lbC5wdWJsaXNoKCJiYWJ5Y2FyZS9sb2dnZXIiLCAiY2hpbGRzZWF0IiwgbmV3IEJ1ZmZlci5mcm9tKG1zZykpOw0KICAgIGF3YWl0IGNoYW5uZWwuY2xvc2UoKTsNCiAgICBhd2FpdCBjb25uLmNsb3NlKCk7DQp9DQoNCmV4cG9ydHMuaGFuZGxlciA9IGZ1bmN0aW9uIChjb250ZXh0LCBldmVudCkgew0KICAgIHZhciBfZXZlbnQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGV2ZW50KSk7DQogICAgdmFyIF9kYXRhID0gKF9ldmVudC5ib2R5LmRhdGEpOw0KICAgIGNvbnRleHQuY2FsbGJhY2soImZlZWRiYWNrdCAiICsgX2RhdGEpOw0KDQogICAgbG9nZ2VyKF9kYXRhKTsNCn07DQo=
    commands:
      - 'npm install amqplib'
    runtimeAttributes:
      repositories: []
    codeEntryType: sourceCode
  platform: {}
